---
sidebar: sidebar 
permalink: backup/saphana-backup-anf-file-based-backups-and-block-integrity-check.html 
keywords: file-based, backup, block integrity, check, 
summary: SAP 建议将基于存储的 Snapshot 备份与每周基于文件的备份相结合，以执行块完整性检查。SnapCenter 服务支持使用选择基于文件的备份作为备份类型的策略来执行块完整性检查。 
---
= 基于文件的备份和块完整性检查
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./../media/


link:saphana-backup-anf-sap-hana-database-snapshot-backups.html["先前版本： SAP HANA 数据库 Snapshot 备份。"]

SAP 建议将基于存储的 Snapshot 备份与每周基于文件的备份相结合，以执行块完整性检查。SnapCenter 服务支持使用选择基于文件的备份作为备份类型的策略来执行块完整性检查。

除了 HANA 数据卷上的 Snapshot 备份之外，基于文件的备份还用于具有二级备份副本。如果主数据卷完全丢失，您可以使用这些基于文件的备份执行还原和恢复操作。

使用此策略计划备份时， SnapCenter 服务会为系统和所有租户数据库创建标准 SAP HANA 文件备份。

SnapCenter 服务显示基于文件的备份的方式与显示基于快照的备份的方式不同。而是仅列出最后一个基于文件的备份。基于文件的备份成功或失败可在作业监控视图中查看。

image:saphana-backup-anf-image51.png["错误：缺少图形映像"]

SAP HANA 备份目录会显示系统数据库和租户数据库的条目。下图显示了系统数据库备份目录中的 SnapCenter 服务块完整性检查。

image:saphana-backup-anf-image58.png["错误：缺少图形映像"]

成功的块完整性检查可创建标准 SAP HANA 数据备份文件。SnapCenter 服务使用 HANA 数据库中配置的备份路径执行基于文件的数据备份操作。

....
vm-pr1:/hanabackup/PR1/file # ls -al *
DB_PR1:
total 1743736
drwxr-xr-- 2 pr1adm sapsys       4096 Jun  6 05:12 .
drwxr-x--- 4 pr1adm sapsys       4096 Jan 31 18:59 ..
-rw-r----- 1 pr1adm sapsys     155648 Jun  6 05:00 SnapCenter_SCS_PR1_BlockIntegrityCheckEverySunday_Weekly_2021_06_06_05_00_00_databackup_0_1
-rw-r----- 1 pr1adm sapsys   83894272 Jun  6 05:01 SnapCenter_SCS_PR1_BlockIntegrityCheckEverySunday_Weekly_2021_06_06_05_00_00_databackup_2_1
-rw-r----- 1 pr1adm sapsys 1694507008 Jun  6 05:02 SnapCenter_SCS_PR1_BlockIntegrityCheckEverySunday_Weekly_2021_06_06_05_00_00_databackup_3_1
SYSTEMDB:
total 1562788
drwxr-xr-- 2 pr1adm sapsys       4096 Jun  6 05:12 .
drwxr-x--- 4 pr1adm sapsys       4096 Jan 31 18:59 ..
-rw-r----- 1 pr1adm sapsys     159744 Jun  6 05:00 SnapCenter_SCS_PR1_BlockIntegrityCheckEverySunday_Weekly_2021_06_06_05_00_00_databackup_0_1
-rw-r----- 1 pr1adm sapsys 1593843712 Jun  6 05:02 SnapCenter_SCS_PR1_BlockIntegrityCheckEverySunday_Weekly_2021_06_06_05_00_00_databackup_1_1
....


== 使用基于文件的备份进行还原和恢复

您必须在 SnapCenter 外部对基于文件的备份执行还原和恢复操作，方法是对 HANA Studio 或 HANA Cockpit 执行标准 HANA 恢复操作。

link:saphana-backup-anf-restore-and-recovery.html["下一步：还原和恢复。"]
